<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Автомобили — GreenRent" />
  <meta name="keywords" content="автомобили, аренда авто, прокат" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>GreenRent — Наш автопарк</title>

  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    integrity="sha384-..."
    crossorigin="anonymous"
  >
  <!-- Подключаем стили (общие) -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- Favicon (пример) -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
</head>
<body>

<!-- ШАПКА: Толстая зелёная линия -->
<header>
  <div class="header-line">
    <div class="container d-flex justify-content-between align-items-center">
      <!-- Логотип -->
      <a href="index.html">
        <img src="images/logo.png" alt="GreenRent" class="header-logo">
      </a>
      <!-- Меню -->
      <nav>
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link text-white" href="cars.html">Автомобили</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="advantages.html">Преимущества</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="about.html">О нас</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="contacts.html">Контакты</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="rules.html">Правила</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="services.html">Цены</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

<!-- Раздел «Наш автопарк» -->
<section class="py-5 bg-section">
  <div class="container">
    <div class="text-center mb-5">
      <h1 class="fw-bold section-title">Наш автопарк</h1>
      <p class="text-muted fs-5">
        Выберите подходящую модель, все данные подтягиваются из админки
      </p>
    </div>

    <!-- Тут будет выводиться список машин из API -->
    <div 
      class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"
      id="carsContainer"
    >
      <!-- JS динамически заполнит этот блок -->
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="py-4 bg-dark text-light footer-decor mt-5">
  <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
    <p class="mb-0">&copy; 2024 GreenRent. Все права защищены.</p>
    <p class="mb-0">Разработано: <a href="#" class="text-light text-decoration-none">GreenRent</a></p>
  </div>
</footer>

<!-- Bootstrap JS -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-..."
  crossorigin="anonymous"
></script>

<!-- Скрипт для динамического списка машин -->
<script>
  async function fetchCars() {
    try {
      // Если Django и cars.html лежат на одном домене/сервере, можно просто: '/api/cars/'
      // Если нужен полный адрес, укажи http://127.0.0.1:8000/api/cars/
      const response = await fetch('http://127.0.0.1:8000/api/cars/');
      const cars = await response.json();
      renderCars(cars);
    } catch (error) {
      console.error('Ошибка при загрузке списка авто:', error);
    }
  }

  function renderCars(cars) {
    const container = document.getElementById('carsContainer');
    // Очищаем содержимое перед вставкой
    container.innerHTML = '';

    cars.forEach(car => {
      // У некоторых полей (ImageField) DRF вернёт относительный путь '/media/cars/filename.jpg'
      // Поэтому для картинки используем `src="${car.image}"` 
      // или, если нужно, `src="http://127.0.0.1:8000${car.image}"`
      container.innerHTML += `
        <div class="col">
          <div class="car-card">
            <p class="price">от <span class="highlight">${car.price_per_day} руб.</span></p>
            <div class="car-img">
              <img src="${car.image}" alt="${car.name}">
            </div>
            <h5 class="car-title">${car.name}</h5>
            <ul class="car-specs">
              <li><strong>Двигатель:</strong> ${car.engine}</li>
              <li><strong>Мощность:</strong> ${car.power}</li>
              <li><strong>Коробка передач:</strong> ${car.transmission}</li>
              <li><strong>Привод:</strong> ${car.drive}</li>
              <li><strong>Расход:</strong> ${car.fuel_consumption}</li>
              <li><strong>Залог:</strong> <span class="highlight">${car.deposit} руб.</span></li>
            </ul>
            <a href="#" class="rent-btn">Подробнее</a>
          </div>
        </div>
      `;
    });
  }

  // При загрузке страницы запросим данные
  fetchCars();
</script>

</body>
</html>
